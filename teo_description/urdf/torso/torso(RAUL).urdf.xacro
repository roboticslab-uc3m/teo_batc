<?xml version="1.0"?>
<!-- 

  ROS urdf definition of TEO torso using xacro

  RoboticsLab, University Carlos III of Madrid

  Joint names and properties are according to REP-120:
  Coordinate Frames for Humanoids Robots

  http://ros.org/reps/rep-0120.html

-->

<robot name="teo" xmlns:xacro="http://ros.org/wiki/xacro">

<!-- *** TEO TORSO PARAMETERS -->

<!-- Link lengths -->
	<xacro:property name="waist_link1" value="0.0" />
	<!--xacro:property name="waist_link2" value="0.287" /-->
	<xacro:property name="waist_link2" value="0.19070" />
	<xacro:property name="torso_link1" value="0.0" />
	<!--xacro:property name="torso_link2" value="0.06" /-->
	<xacro:property name="torso_link2" value="0.06" />
  <xacro:property name="chest_link1" value="0.0" />
  <xacro:property name="chest_link2" value="0.245" />


<!-- Minimum angles -->
	<xacro:property name="waist_yaw_lower" value="${-45 * deg_to_rad}" />
  <xacro:property name="waist_pitch_lower" value="${-45 * deg_to_rad}" />

<!-- Maximum angles -->
	<xacro:property name="waist_yaw_upper" value="${30 * deg_to_rad}" />
	<xacro:property name="waist_pitch_upper" value="${30 * deg_to_rad}" />

<!-- Effort limit of the angles -->
	<xacro:property name="waist_yaw_effort" value="30.0" />
	<xacro:property name="waist_pitch_effort" value="30.0" />


<!-- Velocity limit of the angles-->
	<xacro:property name="waist_yaw_velocity" value="3.0" />
	<xacro:property name="waist_pitch_velocity" value="3.0" />

<!-- Damping of the joints-->
	<xacro:property name="waist_yaw_damping" value="0.0" />
	<xacro:property name="waist_pitch_damping" value="0.0" />

<!-- Friction of the joints--> <!-- IT'S NOT USED IN GAZEBO-->
	<xacro:property name="waist_yaw_friction" value="0.0" />
	<xacro:property name="waist_pitch_friction" value="0.0" />

<!-- Joint reductions-->
	<xacro:property name="waist_yaw_reduction" value="1.0" />
	<xacro:property name="waist_pitch_reduction" value="1.0" />


<!-- *** TORSO TREE -->

  <!-- Links -->
  <link name="waist" >
    <inertial>
      <origin xyz="0.0 0.0 0.0337" rpy="0 0 0"/>
      <mass value="5.7044"/>
      <inertia ixx="1.500634e-5" ixy="-0.000041e-5" ixz="-0.000532e-5" iyy="0.703110e-5" iyz="0.000" izz="2.058404e-5"/>
    </inertial>
    <xacro:insert_visualization_waist/>
  </link>

  <link name="waist_yaw_link" >
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="0.1"/>
      <inertia ixx="0.028026e-5" ixy="-0.000029e-5" ixz="-0.000422e-5" iyy="0.012750e-5" iyz="0.000044e-5" izz="0.020857e-5"/>
    </inertial>
    <xacro:insert_visualization_waist_yaw/>
  </link>

  <link name="waist_pitch_link" >
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="20.0"/>
      <inertia ixx="38.534004e-5" ixy="-0.000441e-5" ixz="-2.351565e-5" iyy="17.888283e-5" iyz="-0.026233e-5" izz="29.913538e-5"/>
    </inertial>
    <xacro:insert_visualization_waist_pitch/>
    <xacro:insert_visualization_torso/>
  </link>


  <!-- Joints -->
  <joint name="waist_yaw" type="revolute">
    <parent link="waist"/>
    <child link="waist_yaw_link"/>
    <origin xyz="${waist_link1} 0 ${waist_link2}" rpy="0 0 0" />
    <axis xyz="0 0 1"/>
    <limit velocity="${waist_yaw_velocity}" effort="${waist_yaw_effort}" lower="${waist_yaw_lower}" upper="${waist_yaw_upper}"/>
  </joint>

  <joint name="waist_pitch" type="revolute">
    <parent link="waist_yaw_link"/>
    <child link="waist_pitch_link"/>
    <origin xyz="-${torso_link1} 0 0" rpy="0 0 0" />
    <axis xyz="0 1 0"/>
    <limit velocity="${waist_pitch_velocity}" effort="${waist_pitch_effort}" lower="${waist_pitch_lower}" upper="${waist_pitch_upper}"/>
  </joint>

    <xacro:waist_joint_simple_transmission axis="yaw" reduction="${waist_yaw_reduction}"/>
    <xacro:waist_joint_simple_transmission axis="pitch" reduction="${waist_pitch_reduction}"/>
</robot>
